<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
</head>
<script src="https://www.gstatic.com/firebasejs/5.7.0/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyBo0CjiZSXhnKcMJBcVx1_TvlvuoDlPnTw",
    authDomain: "train-schedule-e27e3.firebaseapp.com",
    databaseURL: "https://train-schedule-e27e3.firebaseio.com",
    projectId: "train-schedule-e27e3",
    storageBucket: "train-schedule-e27e3.appspot.com",
    messagingSenderId: "799367248935"
  };
  firebase.initializeApp(config);
  var database = firebase.database();
</script>
<body>
<div class="container" id="header">
	<h1 class="card-header">Anytime is Train Time</h1>
</div>
<div class="container" id="schedule">
	<div class="card">
		<h3 class="card-header">Current Train Schedule</h3>
		<div class="card-body" id="current_schedule">
			<div class="row">
				<div class="col"><b>Train Name</b></div>
				<div class="col"><b>Destination</b></div>
				<div class="col"><b>Frequency</b></div>
			</div>
			<hr>
			<!--insert rows here-->
		</div>
	</div>
	<div class="card">
		<h3 class="card-header">Add Train</h3>
		<div class="card-body">
			<form>
				<div class="form-group">
					<label>Train Name</label>
					<input class="form-control" id="train_name">
					<label>Destination</label>
					<input class="form-control" id="destination">
					<label>First Train Time (HH:mm - military time)</label>
					<div class="row">
						<div class="col-md-1">
							<input type="number" class="form-control" max="24" min="0" placeholder="0" id="hours">
						</div>:
						<div class="col-md-1">
							<input type="number" class="form-control" max="59" min="0" placeholder="0" id="minutes">
						</div>
					</div>
					<label>Frequency (min)</label>
					<input type="number" class="form-control" max="59" id="frequency"><br>
					<input type="submit" value="Submit" class="btn btn-success" id="submission">
					<input type="reset" value="Reset" class="btn btn-secondary">
				</div>
			</form>
		</div>
	</div>
</div>
</body>
<script>
$(document).ready(function(){
	$("#submission").on('click',function(){
		var trainName = $('#train_name').val();
		var destination = $('#destination').val();
		var departure = $('#hours').val() + ":" + $('#minutes').val();
		var frequency = $('#frequency').val();
		alert(departure);
		event.preventDefault;
		database.ref().push({
			Train_Name : trainName,
			Destination: destination,
			Departure: departure,
			Frequency: frequency
		});
	});
	database.ref().on("child_added", function(snapshot) {
		$('#current_schedule').append('<div class="row"><div class="col">' + snapshot.val().Train_Name + 
		'</div><div class="col">' + snapshot.val().Destination + '</div><div class="col">' + snapshot.val().Frequency + '</div></div>');
		console.log(snapshot.val().Destination);
		
	}, function(errorObject) {
		console.log("The read failed: " + errorObject.code);
	});
});	
</script>
<style>
	#header h1 {
		padding: 30px;
		text-align: center;
		background-color: rgb(71, 71, 71);
	}
	.card-header {
		background-color: #45448E;
		color: white;
	}
	#add_train {
		background-color: red;
		color: white;
	}
</style>
</html>
